{
    "id": "47085706",
    "text": "\\texttt I \\texttt Q imbalance is a performance-limiting issue in the design of direct conversion receivers, also known as zero intermediate frequency (IF) or homodyne receivers. Such a design translates the received radio frequency (RF, or pass-band) signal directly from the carrier frequency (f_c) to baseband using only one mixing stage. The traditional heterodyne receiver structure needs an IF stage between the RF and baseband signals. The direct conversion receiver structure does not have an IF stage and does not need an image rejection filter. Due to the lower component count, it is easier to integrate. However, a direct-conversion RF front-end suffers from two major drawbacks: one is \\texttt I \\texttt Q imbalance and the other is DC offset. When designing a homodyne receiver, control of \\texttt I \\texttt Q imbalance is necessary to limit signal demodulation error. \\texttt I \\texttt Q imbalances occur due to mismatches between the parallel sections of the receiver chain dealing with the in-phase (\\texttt I) and quadrature (\\texttt Q) signal paths. The local oscillator (LO) generates a sine wave and a copy of that sine wave that is delayed by 90^{\\circ}. When the direct LO output is mixed with the original signal, this produces the \\texttt I signal, whereas when the delayed LO output is mixed with the original signal, that produces the \\texttt Q signal. In the analog domain, the delay is never exactly 90^{\\circ}. Similarly, the analogue gain is never perfectly matched for each of the signal paths. == Definition == A direct-conversion receiver uses two quadrature sinusoidal signals to perform the so-called quadrature down-conversion. This process requires shifting the LO signal by 90^{\\circ} to produce a quadrature sinusoidal component, and a matched pair of mixers converting the same input signal with the two versions of the LO. Mismatches between the two LO signals and/or along the two branches of down-conversion mixers, and any following amplifiers, and low-pass filters, cause the quadrature baseband signals to be corrupted, either due to amplitude or phase differences. Suppose the received pass-band signal is identical to the transmitted signal and is given by: y(t)=Re\\\\{x(t)e^{j2\\pi f_c t}\\\\}=x_{\\texttt{I}}(t)\\cos(2\\pi f_c t)-x_{\\texttt{Q}}(t)\\sin(2\\pi f_c t) where x(t)=x_{\\texttt{I}}(t)+jx_{\\texttt{Q}}(t) is the transmitted base-band signal. Assume that the gain error is 20\\log[(1+\\epsilon_A)/(1-\\epsilon_A)]dB and the phase error is \\varepsilon_\\theta degrees. Then we can model such imbalance using mismatched local oscillator output signals:2(1+\\epsilon_A)\\cos(2\\pi f_c t-\\varepsilon_\\theta/2), \\quad -2(1-\\epsilon_A)\\sin(2\\pi f_c t+\\varepsilon_\\theta/2).Multiplying the pass-band signal by the two LO signals and passing through a pair of low-pass filters, one obtains the demodulated base-band signals as: \\begin{cases} \\tilde{x}_{\\texttt{I}}(t) & =(1+\\varepsilon_A)[x_{\\texttt{I}}(t)\\cos(\\varepsilon_\\theta/2)-x_{\\texttt{Q}}(t)\\sin(\\varepsilon_\\theta/2)] \\\\\\ \\tilde{x}_{\\texttt{Q}}(t) & =(1-\\varepsilon_A)[x_{\\texttt{Q}}(t)\\cos(\\varepsilon_\\theta/2)-x_{\\texttt{I}}(t)\\sin(\\varepsilon_\\theta/2)] \\end{cases}The above equations clearly indicate that \\texttt I \\texttt Q imbalance causes interference between the \\texttt I and \\texttt Q base-band signals. To analyze \\texttt I \\texttt Q imbalance in the frequency domain, the above equation can be rewritten as: \\begin{alignat}{3} \\tilde{x}(t) & =\\tilde{x}_{\\texttt{I}}(t)+j\\tilde{x}_{\\texttt{Q}}(t) \\\\\\ & =[\\cos(\\varepsilon_\\theta/2)+j\\varepsilon_A\\sin(\\varepsilon_\\theta/2)]x(t)+[\\varepsilon_A\\cos(\\varepsilon_\\theta/2)-j\\sin(\\varepsilon_\\theta/2)]x^*(t) \\\\\\ & =\\eta_\\alpha x(t)+\\eta_\\beta x^*(t)\\\\\\ \\end{alignat} where x^* denotes the complex conjugate of x. In an OFDM system, the base-band signal consists of several sub-carriers. Complex-conjugating the base-band signal of the kth sub-carrier carrying data X_k is identical to carrying X^*_k on the (-k)th sub-carrier: ((X_{k,\\texttt{I}}+jX_{k,\\texttt Q})e^{j2\\pi kf_St})^*=(X_{k,\\texttt I}-jX_{k,\\texttt Q})e^{-j2\\pi kf_St}=X^*_ke^{j2\\pi(-k)f_St} where f_S is the sub-carrier spacing. Equivalently, the received base-band OFDM signal under the \\texttt I \\texttt Q imbalance effect is given by: \\tilde{X}_k=\\eta_\\alpha X_k+\\eta_\\beta X^*_{-k} In conclusion, besides a complex gain imposed on the current sub-carrier data X_k, \\texttt I \\texttt Q imbalance also introduces Inter Carrier Interference (ICI) from the adjacent carrier or sub-carrier. The ICI term makes OFDM receivers very sensitive to \\texttt I \\texttt Q imbalances. To solve this problem, the designer can request a stringent specification of the matching of the two branches in the frond-end or compensate for the imbalance in the base- band receiver. On the other hand, can be used a digital Odd-Order I/Q-demodulator with only the one inputV. I. Slyusar, \u201cI/Q-Demodulation Of The Odd Order\u201d, in International Conference on Antenna Theory and Techniques, 21-24 April, 2015, Kharkiv, Ukraine. - Pp. 156-158.Slyusar, V., Serdiuk, P. Synthesis Method of Procedure for Odd-Order I/Q Demodulation Based on Replacing Multistage with Equivalent Single-Stage Demodulation Schemes.// Radioelectron.Commun.Syst. 63, 273\u2013280 (2020).- DOI: 10.3103/S0735272720050064, but such design has a bandwidth limitation. == Simulation == \\texttt I \\texttt Q imbalance can be simulated by computing the gain and phase imbalance and applying them to the base-band signal by means of several real multipliers and adders. == Synchronization Errors == The time domain base-band Signals with \\texttt I \\texttt Q imbalance can be represented by :z_{i,n}=\\eta_\\alpha z(t)+\\eta_\\beta z^*(t)|_{t=i(N+N|g)T_s+N_gT_s+nT_s}Note that \\eta_\\alpha and \\eta_\\beta can be assumed to be time-invariant and frequency-invariant, meaning that they are constant over several sub carriers and symbols. With this property, multiple OFDM sub-carriers and symbols can be used to jointly estimate \\eta_\\alpha and \\eta_\\beta to increase the accuracy. Transforming to the frequency domain, we have the frequency domain OFDM signals under the influence of \\texttt I \\texttt Q imbalance given by: z_{i,k}=\\eta_\\alpha H_{i,k}X_{i,k}+\\eta_\\beta H^*_{i,-k}X^*_{i,-k}+V_{i,k} Note that the second term represents interference coming from the mirrored sub-carrier X_{i,-k} ==\\texttt I \\texttt Q imbalance estimation in MIMO-OFDM systems == In MIMO-OFDM systems, each RF channel has its own down-converting circuit. Therefore, the \\texttt I \\texttt Q imbalance for each RF channel is independent of those for the other RF channels. Considering a 2 \\times 2 MIMO system as an example, the received frequency domain signal is given by: \\begin{cases} Z^{(0)}_{i,k} & =\\eta^{(0)}_\\alpha (H^{(0,0)}_{i,k}X^{(0)}_{i,k}+H^{(0,1)}_{i,k}X^{(1)}_{i,k})+\\eta^{(0)}_\\beta (H^{(0,0)}_{i,-k}X^{(0)}_{i,-k}+H^{(0,1)}_{i,-k}X^{(1)}_{i,-k})^*+V^{(0)}_{i,k}\\\\\\ Z^{(1)}_{i,k} & =\\eta^{(1)}_\\alpha (H^{(1,0)}_{i,k}X^{(0)}_{i,k}+H^{(1,1)}_{i,k}X^{(1)}_{i,k})+\\eta^{(1)}_\\beta (H^{(1,0)}_{i,-k}X^{(0)}_{i,-k}+H^{(1,1)}_{i,-k}X^{(1)}_{i,-k})^*+V^{(1)}_{i,k} \\end{cases} where \\eta^{(q)}_\\alpha and \\eta^{(q)}_\\beta are the \\texttt I \\texttt Q imbalance coefficients of the qth receive RF channel. Estimation of \\eta^{(q)}_\\alpha and \\eta^{(q)}_\\beta is the same for each RF channel. Therefore, we take the first RF channel as an example. The received signals at the pilot sub-carriers of the first RF channel are stacked into a vector z^{(q)}_{i,\\alpha}, \\mathbf{z}^{(0)}_{i,\\alpha }= \\begin{bmatrix} z^{(0)}_{i,\\alpha 0} \\\\\\ z^{(0)}_{i,\\alpha 1} \\\\\\ \\vdots \\\\\\ z^{(0)}_{i,\\alpha J-1} \\end{bmatrix} =\\mathbf{A}^{(0)}_{i,\\alpha} \\begin{bmatrix} \\eta^{(0)}_\\alpha \\\\\\ \\eta^{(0)}_\\beta \\end{bmatrix} +\\mathbf{v}^{(0)}_{i,\\alpha} , where \\mathbf{A}^{(0)}_{i,\\alpha} is the \\mathbf{J}\\times 2 matrix defined by: \\mathbf{A}^{(0)}_{i,\\alpha}= \\begin{bmatrix} (H^{(0,0)}_{i,\\alpha 0}X^{(0)}_{i,\\alpha 0}+H^{(0,1)}_{i,\\alpha 0}X^{(1)}_{i,\\alpha 0})& (H^{(0,0)}_{i,\\alpha _{J-1}}X^{(0)}_{i,\\alpha _{J-1}}+H^{(0,1)}_{i,\\alpha _{J-1}}X^{(1)}_{i,\\alpha _{J-1}})^*\\\\\\ (H^{(0,0)}_{i,\\alpha 1}X^{(0)}_{i,\\alpha 1}+H^{(0,1)}_{i,\\alpha 1}X^{(1)}_{i,\\alpha 1})& (H^{(0,0)}_{i,\\alpha _{J-2}}X^{(0)}_{i,\\alpha _{J-2}}+H^{(0,1)}_{i,\\alpha _{J-2}}X^{(1)}_{i,\\alpha _{J-2}})^*\\\\\\ \\vdots &\\vdots \\\\\\ (H^{(0,0)}_{i,\\alpha_{J-1}}X^{(0)}_{i,\\alpha _{J-1}}+H^{(0,1)}_{i,\\alpha _{J-1}}X^{(1)}_{i,\\alpha _{J-1}})& (H^{(0,0)}_{i,\\alpha _{0}}X^{(0)}_{i,\\alpha _{0}}+H^{(0,1)}_{i,\\alpha _{0}}X^{(1)}_{i,\\alpha _{0}})^*\\\\\\ \\end{bmatrix} Clearly, the above formula is similar to that of the SISO case and can be solved using the LS method. Moreover, the estimation complexity can be reduced by using fewer pilot sub- carriers in the estimation. ==\\texttt I \\texttt Q imbalance compensation == The \\texttt I \\texttt Q imbalance can be compensated in either the time domainSlyusar, V. I., Soloshchev, O. N., Titov, I. V. A method for correction of quadrature disbalance of reception channels in a digital antenna array// Radioelectronics and Communications Systems. \u2013 2004, VOL 47; PART 2, pages 30 - 35. or the frequency domain. In the time domain, the compensated signal Z_m in the current mth sample point is given by:\\overline{z}_m=\\frac{\\widehat{\\eta}^*_\\alpha z_m-\\widehat{\\eta}_\\beta z^*_m}{|\\widehat{\\eta}_\\alpha|^2-|\\widehat{\\eta}_\\beta|^2}=\\frac{\\widehat{\\eta}^*_\\alpha}{|\\widehat{\\eta}_\\alpha|^2-|\\widehat{\\eta}^*_\\beta|^2}(z_m-\\frac{\\widehat{\\eta}_\\beta}{\\widehat{\\eta}^*_\\alpha}z^*_m)We can see that, by using the ratio \\scriptstyle \\frac{\\widehat{\\eta}_\\beta}{\\widehat{\\eta}^*_\\alpha} to mitigate the \\texttt I \\texttt Q imbalance, there is a loss factor \\widehat{\\eta}^*_\\alpha/(|\\widehat{\\eta}_\\alpha|^2-|\\widehat{\\eta}_\\beta|^2). When the noise is added before the \\texttt I \\texttt Q imbalance, the SNR remains the same, because both noise and signal suffer this loss. However, if the noise is added after \\texttt I \\texttt Q imbalance, the effective SNR degrades. In this case, \\eta_\\alpha and \\eta_\\beta, respectively, should be computed. Compared with the time domain approach, compensating in the frequency domain is more complicated because the mirrored sub-carrier is needed. The frequency domain compensated signal at the ith symbol and the kth sub-carrier:\\overline{Z}_{i,k}=\\frac{\\widehat{\\eta}^*_\\alpha Z_{i,k}-\\widehat{\\eta}_\\beta Z^*_{i,k}}{|\\widehat{\\eta}_\\alpha|^2-|\\widehat{\\eta}_\\beta|^2}Nevertheless, in reality, the time domain compensation is less preferred because it introduces larger latency between \\texttt I \\texttt Q imbalance estimation and compensation. ==\\texttt I \\texttt Q imbalance estimation == Frequency domain OFDM signals under the influence of \\texttt I \\texttt Q imbalance is given by:z_{i,k}=\\eta_\\alpha H_{i,k}X_{i,k}+\\eta_\\beta H^*_{i,-k}X^*_{i,-k}+V_{i,k}The \\texttt I \\texttt Q imbalance coefficients \\eta_\\alpha and \\eta_\\beta are mixed with the channel frequency responses, making both the \\texttt I \\texttt Q imbalance estimation and channel estimation difficult. In the first half of the training sequence, only sub- carriers ranging from 1 to N/2 - 1 transmit pilot symbols; the remaining sub- carriers are not used. In the second half, the sub-carriers from -1 to -N/2 are used for pilot transmission. Such a training scheme easily decouples the \\texttt I \\texttt Q imbalance and the channel frequency response. Assuming the value of the pilot symbols is + 1, the received signals at sub-carriers from 1 to N/2 - 1 are given by Z_{i,k}=\\eta_\\alpha H_{i,k}+V_{i,k}, \\; \\forall k=1,\\cdots,N/2-1, while the received signals at the mirrored sub-carriers take the form Z_{i,-k}=\\eta_\\beta H^*_{i,k}+V_{i,-k}, \\; \\forall k=1,\\cdots,\\frac{N}{2}-1. From the two sets of received signals, the ratio \\scriptstyle\\frac{\\eta_\\beta}{\\eta^*_\\alpha} can be easily estimated by Z_{i,-k}/Z^*_{i,k}. The second half of the training sequence can be used in a similar way. Furthermore, the accuracy of this ratio estimation can be improved by averaging over several training symbols and several sub-carriers. Although the \\texttt I \\texttt Q imbalance estimation using this training symbol is simple, this method suffers from low spectrum efficiency, as quite a few OFDM symbols must be reserved for training. Note that, when the thermal noise is added before the \\texttt I \\texttt Q imbalance, the ratio \\scriptstyle \\frac{\\eta_\\beta}{\\eta^*_\\alpha} is sufficient to compensate the \\texttt I \\texttt Q imbalance. However, when the noise is added after the \\texttt I \\texttt Q imbalance, compensation using only \\scriptstyle \\frac{\\eta_\\beta}{\\eta^*_\\alpha} can degrade the ensuing demodulation performance. ==References== == Further reading == # M. Valkama, M. Renfors, and V. Koivunen, 2001. \"Advanced methods for I/Q imbalance compensation in communication receivers,\" IEEE Transactions on Signal Processing, 49, 2335-2344 # J. Tubbax, B. Come, L. V. der Perre, S. Donnay, M. Engels, H. D. Man, and M. Moonen, 2005. \" Compensation of \\texttt I \\texttt Q imbalance and phase noise in OFDM systems,\" IEEE Transactions on Wireless Communications, 4, 872-877. # T.D Chiueh, PY Tsai, IW L, \"Baseband Receiver Design for Wireless MIMO_OFDM Communications 2nd\" # Slyusar, V. I., Soloshchev, O. N., Titov, I. V. A method for correction of quadrature disbalance of reception channels in a digital antenna array// Radioelectronics and Communications Systems. \u2013 2004, VOL 47; PART 2, pages 30 - 35. Category:Radio electronics ",
    "title": "IQ imbalance"
}