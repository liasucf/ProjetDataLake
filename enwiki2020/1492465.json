{
    "id": "1492465",
    "text": "MPEG transport stream (MPEG-TS, MTS) or simply transport stream (TS) is a standard digital container format for transmission and storage of audio, video, and Program and System Information Protocol (PSIP) data. It is used in broadcast systems such as DVB, ATSC and IPTV. Transport stream specifies a container format encapsulating packetized elementary streams, with error correction and synchronization pattern features for maintaining transmission integrity when the communication channel carrying the stream is degraded. Transport streams differ from the similarly-named MPEG program stream in several important ways: program streams are designed for reasonably reliable media, such as discs (like DVDs), while transport streams are designed for less reliable transmission, namely terrestrial or satellite broadcast. Further, a transport stream may carry multiple programs. Transport stream is specified in MPEG-2 Part 1, Systems, formally known as ISO/IEC standard 13818-1 or ITU-T Rec. H.222.0. ==Overview== Multiple MPEG programs are combined then sent to a transmitting antenna. The receiver parses and decodes one of the streams. A transport stream encapsulates a number of other substreams, often packetized elementary streams (PESs) which in turn wrap the main data stream using the MPEG codec or any number of non-MPEG codecs (such as AC3 or DTS audio, and MJPEG or JPEG 2000 video), text and pictures for subtitles, tables identifying the streams, and even broadcaster-specific information such as an electronic program guide. Many streams are often mixed together, such as several different television channels, or multiple angles of a movie. Each stream is chopped into (at most) 188-byte sections and interleaved together; because of the tiny packet size, streams can be interleaved with less latency and greater error resilience compared to program streams and other common containers such as AVI, MOV/MP4, and MKV, which generally wrap each frame into one packet. This is particularly important for videoconferencing, where large frames may introduce unacceptable audio delay. Transport streams tend to be broadcast as constant bitrate (CBR) and filled with padding bytes when not enough data exists. ==Elements== === Packet === A network packet is the basic unit of data in a transport stream, and a transport stream is merely a sequence of packets. Each packet starts with a sync byte and a header, that may be followed with optional additional headers; the rest of the packet consists of payload. All header fields are read as big- endian. Packets are 188 bytes in length, but the communication medium may add additional information. The 188-byte packet size was originally chosen for compatibility with Asynchronous Transfer Mode (ATM) systems. {|class=\"wikitable\" |+ Partial transport stream packet format !Name !Number of bits !Bitmask (big-endian) !Description |- |colspan=4 style=\"text-align: center\" |4-byte Transport Stream Header |- |Sync byte |style=\"text- align:center;\"|8 |style=\"text-align:right;\"|`0xff000000` |Bit pattern of 0x47 (ASCII char 'G') |- |Transport error indicator (TEI) |style=\"text- align:center;\"|1 |style=\"text-align:right;\"|`0x800000` |Set when a demodulator can't correct errors from FEC data; indicating the packet is corrupt. |- |Payload unit start indicator (PUSI) |style=\"text-align:center;\"|1 |style=\"text-align:right;\"|`0x400000` |Set when a PES, PSI, or DVB-MIP packet begins immediately following the header. |- |Transport priority |style=\"text- align:center;\"|1 |style=\"text-align:right;\"|`0x200000` |Set when the current packet has a higher priority than other packets with the same PID. |- |PID |style=\"text-align:center;\"|13 |style=\"text-align:right;\"|`0x1fff00` |Packet Identifier, describing the payload data. |- |Transport scrambling control (TSC) |style=\"text-align:center;\"|2 |style=\"text-align:right;\"|`0xc0` | '00' = Not scrambled. For DVB-CSA and ATSC DES only: '01' (0x40) = Reserved for future use '10' (0x80) = Scrambled with even key '11' (0xC0) = Scrambled with odd key |- |Adaptation field control |style=\"text-align:center;\"|2 |style=\"text-align:right;\"|`0x30` |01 \u2013 no adaptation field, payload only, 10 \u2013 adaptation field only, no payload, 11 \u2013 adaptation field followed by payload, 00 \u2013 RESERVED for future use |- |Continuity counter |style=\"text- align:center;\"|4 |style=\"text-align:right;\"|`0xf` |Sequence number of payload packets (0x00 to 0x0F) within each stream (except PID 8191) Incremented per-PID, only when a payload flag is set. |- |colspan=4 style=\"text-align: center\" |Optional fields |- |Adaptation field |style=\"text- align:center;\"|variable|| |Present if adaptation field control is 10 or 11. See below for format. |- |Payload data |style=\"text-align:center;\"|variable|| |Present if adaptation field control is 01 or 11. Payload may be PES packets, program specific information (below), or other data. |} {|class=\"wikitable\" |+ Adaptation field format !Name !Number of bits !Bitmask !Description |- |Adaptation field length |style=\"text-align:center;\"|8|| |Number of bytes in the adaptation field immediately following this byte |- |Discontinuity indicator |style=\"text-align:center;\"|1 |style=\"text-align:right;\"|`0x80` |Set if current TS packet is in a discontinuity state with respect to either the continuity counter or the program clock reference |- |Random access indicator |style=\"text-align:center;\"|1 |style=\"text-align:right;\"|`0x40` |Set when the stream may be decoded without errors from this point |- |Elementary stream priority indicator |style=\"text-align:center;\"|1 |style=\"text- align:right;\"|`0x20` |Set when this stream should be considered \"high priority\" |- |PCR flag |style=\"text-align:center;\"|1 |style=\"text- align:right;\"|`0x10` |Set when PCR field is present |- |OPCR flag |style=\"text-align:center;\"|1 |style=\"text-align:right;\"|`0x08` |Set when OPCR field is present |- |Splicing point flag |style=\"text-align:center;\"|1 |style=\"text-align:right;\"|`0x04` |Set when splice countdown field is present |- |Transport private data flag |style=\"text-align:center;\"|1 |style=\"text- align:right;\"|`0x02` |Set when transport private data is present |- |Adaptation field extension flag |style=\"text-align:center;\"|1 |style=\"text- align:right;\"|`0x01` |Set when adaptation extension data is present |- |colspan=4 style=\"text-align: center\" |Optional fields |- |PCR |style=\"text- align:center;\"|48|| |Program clock reference, stored as 33 bits base, 6 bits reserved, 9 bits extension. The value is calculated as base * 300 + extension. |- |OPCR |style=\"text- align:center;\"|48|| |Original Program clock reference. Helps when one TS is copied into another |- |Splice countdown |style=\"text-align:center;\"|8|| |Indicates how many TS packets from this one a splicing point occurs (Two's complement signed; may be negative) |- |Transport private data length |style=\"text-align:center;\"|8|| |The length of the following field |- |Transport private data |style=\"text-align:center;\"|variable|| |Private data |- |Adaptation extension |style=\"text-align:center;\"|variable|| |See below |- |Stuffing bytes |style=\"text-align:center;\"|variable|| |Always `0xFF` |} {|class=\"wikitable\" |+ Adaptation extension format !Name !Number of bits !Bitmask !Description |- |Adaptation extension length |style=\"text- align:center;\"|8 |`0xff00` |The length of the header |- |Legal time window (LTW) flag |style=\"text-align:center;\"|1 |`0x0080` | |- |Piecewise rate flag |style=\"text-align:center;\"|1 |`0x0040` | |- |Seamless splice flag |style=\"text-align:center;\"|1 |`0x0020` | |- |Reserved |style=\"text- align:center;\"|5 |`0x001f` | |- |colspan=4 style=\"text-align: center\" |Optional fields |- |colspan=4 |LTW flag set (2 bytes) |- |LTW valid flag |style=\"text-align:center;\"|1 |`0x8000` | |- |LTW offset |style=\"text- align:center;\"|15 |`0x7fff` |Extra information for rebroadcasters to determine the state of buffers when packets may be missing. |- |colspan=4 |Piecewise flag set (3 bytes) |- |Reserved |style=\"text-align:center;\"|2 |`0xc00000` | |- |Piecewise rate |style=\"text-align:center;\"|22 |`0x3fffff` |The rate of the stream, measured in 188-byte packets, to define the end-time of the LTW. |- |colspan=4 |Seamless splice flag set (5 bytes) |- |Splice type |style=\"text- align:center;\"|4 |`0xf000000000` |Indicates the parameters of the H.262 splice. |- |DTS next access unit |style=\"text-align:center;\"|36 |`0x0efffefffe` |The PES DTS of the splice point. Split up as multiple fields, 1 marker bit (0x1), 15 bits, 1 marker bit, 15 bits, and 1 marker bit, for 33 data bits total. |} ===Packet identifier (PID)=== Each table or elementary stream in a transport stream is identified by a 13-bit packet identifier (PID). A demultiplexer extracts elementary streams from the transport stream in part by looking for packets identified by the same PID. In most applications, time-division multiplexing will be used to decide how often a particular PID appears in the transport stream. {| class=\"wikitable\" |+ Packet identifiers in use |- ! Decimal !! Hexadecimal !! Description |- |0 |0x0000 |Program association table (PAT) contains a directory listing of all program map tables |- |1 |0x0001 |Conditional access table (CAT) contains a directory listing of all ITU-T Rec. H.222 entitlement management message streams used by program map tables |- |2 |0x0002 |Transport stream description table (TSDT) contains descriptors relating to the overall transport stream |- |3 |0x0003 |IPMP control information table contains a directory listing of all ISO/IEC 14496-13 control streams used by program map tables |- |4\u201315 |0x0004-0x000F |Reserved for future use |- |16\u201331 |0x0010-0x001F |Used by DVB metadata * 0x0010: NIT, ST * 0x0011: SDT, BAT, ST * 0x0012: EIT, ST, CIT * 0x0013: RST, ST * 0x0014: TDT, TOT, ST * 0x0015: network synchronization * 0x0016: RNT * 0x0017-0x001B: reserved for future use * 0x001C: inband signalling * 0x001D: measurement * 0x001E: DIT * 0x001F: SIT |- |32-8186 |0x0020-0x1FFA |May be assigned as needed to program map tables, elementary streams and other data tables |- |8187 |0x1FFB |Used by DigiCipher 2/ATSC MGT metadata |- |8188\u20138190 |0x1FFC-0x1FFE |May be assigned as needed to program map tables, elementary streams and other data tables |- |8191 |0x1FFF |Null Packet (used for fixed bandwidth padding) |} ===Programs=== Transport stream has a concept of programs. Every program is described by a program map table (PMT). The elementary streams associated with that program have PIDs listed in the PMT. Another PID is associated with the PMT itself. For instance, a transport stream used in digital television might contain three programs, to represent three television channels. Suppose each channel consists of one video stream, one or two audio streams, and any necessary metadata. A receiver wishing to decode one of the three channels merely has to decode the payloads of each PID associated with its program. It can discard the contents of all other PIDs. A transport stream with more than one program is referred to as a multi-program transport stream (MPTS). A single program transport stream is referred to as a single-program transport stream (SPTS). ===Program specific information=== There are 4 program specific information (PSI) tables: program association (PAT), program map (PMT), conditional access (CAT), and network information (NIT). The MPEG-2 specification does not specify the format of the CAT and NIT. === PCR === To enable a decoder to present synchronized content, such as audio tracks matching the associated video, at least once each 100 ms, a program clock reference (PCR) is transmitted in the adaptation field of an MPEG-2 transport stream packet. The PID with the PCR for an MPEG-2 program is identified by the pcr_pid value in the associated PMT. The value of the PCR, when properly used, is employed to generate a system_timing_clock in the decoder. The system time clock (STC) decoder, when properly implemented, provides a highly accurate time base that is used to synchronize audio and video elementary streams. Timing in MPEG-2 references this clock. For example, the presentation time stamp (PTS) is intended to be relative to the PCR. The first 33 bits are based on a 90 kHz clock. The last 9 bits are based on a 27 MHz clock. The maximum jitter permitted for the PCR is . ===Null packets=== Some transmission schemes, such as those in ATSC and DVB, impose strict constant bitrate requirements on the transport stream. In order to ensure that the stream maintains a constant bitrate, a multiplexer may need to insert some additional packets. The PID 0x1FFF is reserved for this purpose. The payload of null packets is all zeroes, and the receiver is expected to ignore its contents. == Use in digital video cameras== Transport Stream was originally designed for broadcast. Later it was adapted for use with digital video cameras, recorders and players by adding a 4-byte timecode (TC) field to the standard 188-byte packets, resulting in a 192-byte packet. This is what is informally called M2TS stream. The Blu-ray Disc Association calls it \"BDAV MPEG-2 transport stream\". JVC called it TOD when used in HDD-based camcorders like GZ-HD7. The timecode allows quick access to any part of the stream either from a media player, or from a non-linear video editing system. It is also used to synchronize video streams from several cameras in a multiple-camera setup. ==Use in Blu-ray== Blu-ray Disc video titles authored with menu support are in the Blu-ray Disc Movie (BDMV) format and contain audio, video, and other streams in a BDAV container, which is based on the MPEG-2 transport stream format.Afterdawn.com Glossary \u2013 BD-MV (Blu-ray Movie) and BDAV container , Retrieved on 26 July 2009Afterdawn.com Glossary \u2013 BDAV container, Retrieved on 26 July 2009 Blu-ray Disc video uses these modified MPEG-2 transport streams, compared to DVD's program streams that don't have the extra transport overhead. There is also the BDAV (Blu-ray Disc Audio/Visual) format, the consumer-oriented alternative to the BDMV format used for movie releases. The BDAV format is used on Blu-ray Disc recordable for audio/video recording. Blu-ray Disc employs the MPEG-2 transport stream recording method. This enables transport streams of a BDAV converted digital broadcast to be recorded as they are with minimal alteration of the packets. It also enables simple stream cut style editing of a BDAV converted digital broadcast that is recorded as is and where the data can be edited just by discarding unwanted packets from the stream. Although it is quite natural, a function for high- speed and easy-to-use retrieval is built in.Blu-ray Disc Association (August 2004) Blu-ray Disc Format, White paper (PDF) Page 22, Retrieved on 28 July 2009 ==See also== * MPEG media transport (MMT) * Real-time Transport Protocol (RTP) * Unidirectional Lightweight Encapsulation (ULE) ==Notes== ==References== ==External links== * ITU-T H.222.0 | ISO/IEC 13818-1 Systems Spec Documents * Latest free copy of the spec, October 2014 * MPEG-4 Systems FAQ * TSDuck \u2013 Free open source tool to manipulate MPEG transport streams. Category:ATSC Category:Digital container formats Category:MPEG-2 Category:ITU-T recommendations ",
    "title": "MPEG transport stream"
}