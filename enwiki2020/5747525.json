{
    "id": "5747525",
    "text": "The TCP window scale option is an option to increase the receive window size allowed in Transmission Control Protocol above its former maximum value of 65,535 bytes. This TCP option, along with several others, is defined in IETF RFC 1323 which deals with long fat networks (LFNs). ==TCP windows== The throughput of a communication is limited by two windows: the congestion window and the receive window. The congestion window tries not to exceed the capacity of the network (congestion control); the receive window tries not to exceed the capacity of the receiver to process data (flow control). The receiver may be overwhelmed by data if for example it is very busy (such as a Web server). Each TCP segment contains the current value of the receive window. If, for example, a sender receives an ack which acknowledges byte 4000 and specifies a receive window of 10000 (bytes), the sender will not send packets after byte 14000, even if the congestion window allows it. == Theory == TCP window scale option is needed for efficient transfer of data when the bandwidth-delay product (BDP) is greater than 64K. For instance, if a T1 transmission line of 1.5 Mbit/second was used over a satellite link with a 513 millisecond round trip time (RTT), the bandwidth-delay product is \\scriptstyle 1,500,000 \\times 0.513 = 769,500 bits or about 96,187 bytes. Using a maximum buffer size of 64 KiB only allows the buffer to be filled to (65,535 / 96,187) = 68% of the theoretical maximum speed of 1.5 Mbits/second, or 1.02 Mbit/s. By using the window scale option, the receive window size may be increased up to a maximum value of 1,073,725,440\\ \\scriptstyle \\left(= (2^{16}-1)\\times(2^{14}) = 65,535 \\times 16,384)\\right) bytes. This is done by specifying a two byte shift count in the header options field. The true receive window size is left shifted by the value in shift count. A maximum value of 14 may be used for the shift count value. This would allow a single TCP connection to transfer data over the example satellite link at 1.5 Mbit/second utilizing all of the available bandwidth. Essentially, not more than one full transmission window can be transferred within one round-trip time period. The window scale option enables a single TCP connection to fully utilize an LFN with a BDP of up to 1 GB, e.g. a 10 Gbit/s link with round-trip time of 800 ms. == Possible side effects == Because some firewalls do not properly implement TCP Window Scaling, it can cause a user's Internet connection to malfunction intermittently for a few minutes, then appear to start working again for no reason. There is also an issue if a firewall doesn't support the TCP extensions. == Configuration of operating systems == === Windows === TCP Window Scaling is implemented in Windows since Windows 2000. It is enabled by default in Windows Vista / Server 2008 and newer, but can be turned off manually if required. Windows Vista and Windows 7 have a fixed default TCP receive buffer of 64 kB, scaling up to 16 MB through \"autotuning\", limiting manual TCP tuning over long fat networks. === Linux === Linux kernels (from 2.6.8, August 2004) have enabled TCP Window Scaling by default. The configuration parameters are found in the /proc filesystem, see pseudo-file and its companions and (more information: , section sysctl). Scaling can be turned off by issuing the following command. To maintain the changes after a restart, include the line in (or as of systemd 207). === FreeBSD, OpenBSD, NetBSD and Mac OS X === Default setting for FreeBSD, OpenBSD, NetBSD and Mac OS X is to have window scaling (and other features related to RFC 1323) enabled. To verify their status, a user can check the value of the \"\" variable via the sysctl command: A value of 1 (output \"\") means scaling is enabled, 0 means \"disabled\". If enabled it can be turned off by issuing the command: This setting is lost across a system restart. To ensure that it is set at boot time, add the following line to /etc/sysctl.conf: `net.inet.tcp.rfc1323=0` However, on macOS 10.14 this command provides an error == Sources == Window Scale Option Category:Network acceleration de:TCP Receive Window#TCP Window Scale Option ",
    "title": "TCP window scale option"
}